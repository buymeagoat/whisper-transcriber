<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 760 460" width="760" height="460">
  <style>
    text { font-family: Arial, sans-serif; font-size: 12px; }
    .title { font-size: 18px; font-weight: bold; }
    .box { fill: #f9f9f9; stroke: #333; stroke-width: 1; }
    .optional { stroke-dasharray: 4; }
    .arrow { fill: none; stroke: #333; stroke-width: 1.5; marker-end: url(#arrowhead); }
  </style>
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
    </marker>
  </defs>
  <text x="380" y="24" text-anchor="middle" class="title">Whisper Transcriber Architecture (v1)</text>

  <!-- Frontend -->
  <rect x="20" y="100" width="150" height="40" class="box" />
  <text x="95" y="125" text-anchor="middle">Frontend</text>
  <text x="95" y="140" text-anchor="middle">React SPA</text>

  <!-- Backend -->
  <rect x="220" y="90" width="170" height="60" class="box" />
  <text x="305" y="115" text-anchor="middle">FastAPI Backend</text>
  <text x="305" y="130" text-anchor="middle">Entrypoint &amp; Admin API</text>

  <!-- Worker -->
  <rect x="440" y="100" width="120" height="40" class="box" />
  <text x="500" y="125" text-anchor="middle">Worker</text>
  <text x="500" y="140" text-anchor="middle">Thread/Celery</text>

  <!-- Metadata Writer -->
  <rect x="580" y="100" width="140" height="40" class="box" />
  <text x="650" y="125" text-anchor="middle">Metadata Writer</text>

  <!-- PostgreSQL -->
  <rect x="220" y="200" width="130" height="40" class="box" />
  <text x="285" y="225" text-anchor="middle">PostgreSQL</text>
  <text x="285" y="240" text-anchor="middle">Database</text>

  <!-- RabbitMQ -->
  <rect x="380" y="200" width="130" height="40" class="box optional" />
  <text x="445" y="225" text-anchor="middle">RabbitMQ</text>
  <text x="445" y="240" text-anchor="middle">Broker</text>

  <!-- Local Storage -->
  <rect x="540" y="200" width="130" height="40" class="box" />
  <text x="605" y="225" text-anchor="middle">Local Storage</text>
  <text x="605" y="240" text-anchor="middle">uploads/logs</text>

  <!-- S3 Storage -->
  <rect x="540" y="260" width="130" height="40" class="box optional" />
  <text x="605" y="285" text-anchor="middle">S3 Bucket</text>
  <text x="605" y="300" text-anchor="middle">(optional)</text>

  <!-- Shared dirs -->
  <rect x="20" y="200" width="170" height="40" class="box" />
  <text x="105" y="225" text-anchor="middle">Shared Directories</text>
  <text x="105" y="240" text-anchor="middle">cache / logs / models</text>

  <!-- Arrows -->
  <path d="M170 120 L220 120" class="arrow" />
  <text x="195" y="110" text-anchor="middle">HTTP Upload</text>

  <path d="M390 120 L440 120" class="arrow" />
  <text x="415" y="110" text-anchor="middle">Job</text>

  <path d="M560 120 L580 120" class="arrow" />
  
  <path d="M650 140 L605 200" class="arrow" />
  <text x="640" y="180" text-anchor="middle" transform="rotate(56,640,180)">Files</text>

  <path d="M500 140 L500 200" class="arrow" />
  <path d="M305 150 L305 200" class="arrow" />

  <path d="M605 240 L605 260" class="arrow" />

  <path d="M305 150 L445 200" class="arrow" />

  <path d="M445 200 L445 100" class="arrow" marker-end="url(#arrowhead)" />
  <text x="460" y="170" text-anchor="start" transform="rotate(-90,460,170)">Queue</text>

  <!-- WebSocket arrows -->
  <path d="M220 150 L170 200" class="arrow" />
  <text x="195" y="180" text-anchor="middle">Logs WS</text>
  <path d="M170 120 L220 140" class="arrow" />
  <text x="190" y="135" text-anchor="middle">Status WS</text>
</svg>
